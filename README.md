# 航空订票系统 - 功能说明文档

## 项目概述
本系统是一个基于C语言开发的航空订票管理系统，提供了完整的航班管理、用户管理、订单管理和报表统计功能。系统采用模块化设计，包含管理员和普通用户两种角色，满足航空公司日常运营和个人订票需求。

## 功能说明

### 1. 用户管理功能
| 功能         | 描述                             | 用户类型 |
|--------------|----------------------------------|----------|
| 用户注册     | 新用户创建账户                   | 普通用户 |
| 用户登录     | 已注册用户登录系统               | 所有用户 |
| 密码修改     | 修改账户密码（安全输入）         | 所有用户 |
| 余额管理     | 查看余额、充值操作               | 普通用户 |
| 退出登录     | 安全退出当前账户                 | 所有用户 |

### 2. 航班管理功能
| 功能         | 描述                             | 用户类型 |
|--------------|----------------------------------|----------|
| 航班查询     | 分页浏览所有航班信息             | 管理员 |
| 航班搜索     | 按起降机场搜索航班               | 所有用户 |
| 航班排序     | 按出发时间或价格排序             | 所有用户 |
| 航班添加     | 管理员添加新航班                 | 管理员   |
| 航班修改     | 管理员修改航班信息               | 管理员   |
| 航班删除     | 管理员删除航班                   | 管理员   |

### 3. 订单管理功能
| 功能         | 描述                             | 用户类型 |
|--------------|----------------------------------|----------|
| 机票预订     | 用户预订选定航班                 | 普通用户 |
| 订单查看     | 查看个人所有订单                 | 普通用户 |
| 退票操作     | 取消已预订的机票                 | 普通用户 |
| 订单持久化   | 自动保存/加载用户订单            | 系统     |

### 4. 报表统计功能
| 功能         | 描述                             | 用户类型 |
|--------------|----------------------------------|----------|
| 航班报表     | 统计航班状态分布和价格分析       | 管理员   |
| 订单报表     | 统计所有用户订单和消费情况       | 管理员   |
| 报表导出     | 自动生成带日期的报表文件         | 管理员   |

## 系统架构
```
├── data/                 # 数据存储目录
│   ├── flights.txt       # 航班数据文件
│   ├── init_flights.csv  # 初始航班数据
│   ├── order/            # 用户订单目录
│   ├── reports/          # 报表存储目录
│   └── userinfo.txt      # 用户账户数据
├── include/              # 头文件目录
│   └── head.h            # 系统主头文件
├── src/                  # 源代码目录
│   ├── admin.c           # 管理员功能
│   ├── flight.c          # 航班管理
│   ├── list.c            # 链表操作
│   ├── main.c            # 主程序
│   ├── order.c           # 订单管理
│   ├── user.c            # 用户功能
│   └── utils.c           # 工具函数
└── README.md             # 说明文档
```

## 测试结果

### 测试环境
- 操作系统: Ubuntu 22.04 LTS
- 编译器: GCC 9.5.0
- 终端: GNOME Terminal 3.44.0

### 功能测试结果

| 测试模块     | 测试用例                     | 结果     | 备注                      |
|--------------|------------------------------|----------|---------------------------|
| 用户管理     | 新用户注册                   | ✅ 通过  | 账户数据正确保存          |
|              | 用户登录验证                 | ✅ 通过  | 密码安全输入功能正常      |
|              | 密码修改                     | ✅ 通过  | 文件数据同步更新          |
|              | 余额充值                     | ✅ 通过  | 金额计算准确              |
| 航班管理     | 航班添加                     | ✅ 通过  | 航班号唯一性验证有效      |
|              | 航班信息修改                 | ✅ 通过  | 支持多字段修改            |
|              | 航班删除                     | ✅ 通过  | 链表操作正确              |
|              | 航班搜索排序                 | ✅ 通过  | 搜索结果准确              |
| 订单管理     | 机票预订                     | ✅ 通过  | 余额检查机制有效          |
|              | 订单查看                     | ✅ 通过  | 分页显示功能正常          |
|              | 退票操作                     | ✅ 通过  | 订单文件同步更新          |
| 报表统计     | 航班报表生成                 | ✅ 通过  | 包含完整统计信息          |
|              | 订单报表生成                 | ✅ 通过  | 正确统计所有用户订单      |

## 使用说明

### 编译运行
```bash
gcc -o bin/flight_management src/*.c
或
make

./flight_management
```

### 初始账户
| 用户名   | 密码 | 类型     |
|----------|------|----------|
| admin    | 123  | 管理员   |

### 注意事项
1. 首次运行会自动创建`data/`目录结构
2. Windows系统需替换`system("clear")`为`system("cls")`
